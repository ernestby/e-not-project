<template>
  <div class="auth-item">
    <div @click="isActive = !isActive" class="auth-item__top" :class="isActive ? ' active' : ''">
      <div>
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M14 3V7C14 7.26522 14.1054 7.51957 14.2929 7.70711C14.4804 7.89464 14.7348 8 15 8H19M9 13C9 12.7348 9.10536 12.4804 9.29289 12.2929C9.48043 12.1054 9.73478 12 10 12H11C11.2652 12 11.5196 12.1054 11.7071 12.2929C11.8946 12.4804 12 12.7348 12 13V16C12 16.2652 11.8946 16.5196 11.7071 16.7071C11.5196 16.8946 11.2652 17 11 17H10C9.73478 17 9.48043 16.8946 9.29289 16.7071C9.10536 16.5196 9 16.2652 9 16V13Z"
            stroke="#1BAA75"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M15 12V17M17 21H7C6.46957 21 5.96086 20.7893 5.58579 20.4142C5.21071 20.0391 5 19.5304 5 19V5C5 4.46957 5.21071 3.96086 5.58579 3.58579C5.96086 3.21071 6.46957 3 7 3H14L19 8V19C19 19.5304 18.7893 20.0391 18.4142 20.4142C18.0391 20.7893 17.5304 21 17 21Z"
            stroke="#1BAA75"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        <h3>Вход посредством ЭЦП</h3>
      </div>
      <svg v-show="!isActive" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M11 19V13H5V11H11V5H13V11H19V13H13V19H11Z" fill="#24334B" />
      </svg>
      <svg v-show="isActive" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M19 12.998H5V10.998H19V12.998Z" fill="white" />
      </svg>
    </div>
    <div v-if="isActive" class="auth-item__login">
      <div class="auth-item__alert">
        <p>Для входа посредством ЭЦП вам необходимо подтвердить отпечаток своего пальца</p>
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23Z"
            fill="#1BAA75"
          />
          <path
            d="M9.5249 7.87457C9.52496 7.44114 9.63884 7.01532 9.85515 6.63972C10.0715 6.26412 10.3826 5.95191 10.7575 5.73433C11.1324 5.51676 11.5578 5.40144 11.9912 5.39992C12.4247 5.3984 12.8509 5.51073 13.2273 5.72567C13.6037 5.94062 13.917 6.25064 14.1359 6.62471C14.3549 6.99878 14.4717 7.42379 14.4748 7.85722C14.4779 8.29064 14.3672 8.71728 14.1536 9.09444C13.94 9.47161 13.6311 9.78607 13.2579 10.0064C12.6309 10.3773 11.9999 10.9409 11.9999 11.6696V13.3196"
            stroke="white"
            stroke-width="2"
            stroke-linecap="round"
          />
          <path
            d="M12.0002 19.5995C13.2815 19.5995 14.3202 18.5608 14.3202 17.2795C14.3202 15.9982 13.2815 14.9595 12.0002 14.9595C10.7189 14.9595 9.68018 15.9982 9.68018 17.2795C9.68018 18.5608 10.7189 19.5995 12.0002 19.5995Z"
            fill="white"
            stroke="#1BAA75"
            stroke-width="2"
          />
        </svg>
      </div>
      <div class="scaner-svg" :class="scanerAnalys ? ' active' : ''">
        <svg
          @click="handleClick"
          v-show="!end"
          width="160"
          height="160"
          viewBox="0 0 160 160"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle cx="80" cy="80" r="50" fill="#1BAA75" />
          <path
            d="M93.4411 63.3223C93.2585 63.3227 93.0791 63.2781 92.9216 63.193C88.5876 61.0598 84.8405 60.1548 80.3483 60.1548C75.8786 60.1548 71.6345 61.1676 67.7741 63.193C67.2282 63.4767 66.5554 63.2792 66.239 62.7585C66.0977 62.5072 66.0659 62.2158 66.1499 61.9437C66.2338 61.6715 66.4274 61.439 66.6911 61.2933C70.8546 59.1223 75.5619 57.9873 80.3483 58.0001C85.156 58.0001 89.3552 59.0128 93.9607 61.2753C94.2293 61.4111 94.4294 61.6384 94.518 61.9083C94.6065 62.1782 94.5765 62.4692 94.4343 62.719C94.3488 62.8963 94.2098 63.0474 94.0338 63.1543C93.8578 63.2613 93.6521 63.3196 93.4411 63.3223ZM61.1374 74.6347C60.9029 74.6332 60.6745 74.5655 60.4831 74.4408C60.2341 74.2707 60.0667 74.0184 60.0161 73.737C59.9654 73.4557 60.0355 73.1672 60.2116 72.9324C62.447 69.9158 65.2898 67.5456 68.6774 65.8864C75.7653 62.3994 84.8405 62.3742 91.9509 65.8649C95.3376 67.524 98.1814 69.8727 100.417 72.8678C100.592 73.1028 100.662 73.391 100.611 73.6722C100.561 73.9533 100.394 74.2056 100.145 74.3761C100.025 74.4589 99.887 74.5181 99.7407 74.55C99.5943 74.5819 99.4423 74.5859 99.2942 74.5616C99.1461 74.5374 99.005 74.4855 98.8796 74.4091C98.7542 74.3327 98.6472 74.2335 98.5651 74.1175C96.5339 71.4026 93.9607 69.2694 90.9128 67.7826C84.4343 64.6152 76.1491 64.6152 69.6931 67.8042C66.6228 69.3125 64.0495 71.4672 62.0183 74.1786C61.9307 74.3213 61.8023 74.4392 61.647 74.5196C61.4918 74.6 61.3155 74.6398 61.1374 74.6347ZM75.2458 100.646C75.0966 100.647 74.9489 100.619 74.8126 100.563C74.6763 100.508 74.5546 100.426 74.4558 100.323C72.4919 98.4445 71.4275 97.2343 69.9187 94.6307C68.3562 91.9803 67.5485 88.7482 67.5485 85.2791C67.5485 78.8795 73.2819 73.6651 80.3259 73.6651C87.3698 73.6651 93.1071 78.8795 93.1071 85.2791C93.1116 85.4179 93.0857 85.5561 93.031 85.6855C92.9763 85.815 92.8939 85.933 92.7886 86.0326C92.6834 86.1322 92.5575 86.2114 92.4184 86.2655C92.2793 86.3196 92.1298 86.3475 91.9787 86.3475C91.8277 86.3475 91.6782 86.3196 91.539 86.2655C91.3999 86.2114 91.274 86.1322 91.1688 86.0326C91.0636 85.933 90.9812 85.815 90.9265 85.6855C90.8718 85.5561 90.8459 85.4179 90.8503 85.2791C90.8503 80.0646 86.1316 75.8198 80.3308 75.8198C74.53 75.8198 69.8064 80.0646 69.8064 85.2791C69.8064 88.3819 70.528 91.2477 71.905 93.5748C73.3503 96.0528 74.3464 97.1086 76.0817 98.7893C76.2875 98.9984 76.4015 99.2704 76.4015 99.5524C76.4015 99.8345 76.2875 100.106 76.0817 100.316C75.8602 100.521 75.5605 100.64 75.2458 100.646ZM91.4323 96.6597C88.7458 96.6597 86.3757 96.0133 84.4343 94.742C82.7803 93.6761 81.429 92.2605 80.4943 90.6144C79.5596 88.9682 79.0688 87.1396 79.0632 85.2827C79.0569 85.1428 79.0814 85.0031 79.1352 84.8721C79.1891 84.7411 79.2713 84.6215 79.3767 84.5204C79.4822 84.4193 79.6088 84.3389 79.7489 84.284C79.889 84.2291 80.0398 84.2007 80.1921 84.2007C80.3444 84.2007 80.4952 84.2291 80.6353 84.284C80.7754 84.3389 80.902 84.4193 81.0075 84.5204C81.1129 84.6215 81.1951 84.7411 81.2489 84.8721C81.3028 85.0031 81.3273 85.1428 81.321 85.2827C81.3248 86.791 81.7249 88.2762 82.4873 89.6118C83.2498 90.9473 84.3519 92.0938 85.6999 92.9536C87.3025 93.9878 89.1765 94.4798 91.4343 94.4798C92.2206 94.467 93.0045 94.3949 93.778 94.2644C94.3874 94.1566 94.9743 94.5445 95.0866 95.1478C95.1438 95.4262 95.0786 95.7142 94.9053 95.9484C94.7319 96.1827 94.4645 96.3442 94.1618 96.3975C93.2626 96.5609 92.3489 96.6474 91.4323 96.6561V96.6597ZM86.8942 101.095C86.7951 101.091 86.6968 101.077 86.6013 101.052C83.0114 100.104 80.6638 98.8324 78.2028 96.5268C75.0417 93.5317 73.3044 89.5455 73.3044 85.2791C73.3044 81.7884 76.4196 78.9442 80.2566 78.9442C84.0935 78.9442 87.2097 81.7884 87.2097 85.2791C87.2097 87.5847 89.3093 89.4593 91.905 89.4593C94.5007 89.4593 96.6003 87.5847 96.6003 85.2791C96.6003 77.1557 89.2634 70.5622 80.2341 70.5622C73.823 70.5622 67.9538 73.9667 65.3132 79.2458C64.4343 80.9912 63.9812 83.0382 63.9812 85.2791C63.9812 86.9598 64.1384 89.6101 65.4929 93.0577C65.7194 93.6179 65.4255 94.2428 64.8386 94.4367C64.6991 94.4856 64.5503 94.508 64.4012 94.5026C64.252 94.4972 64.1056 94.4642 63.9707 94.4055C63.8358 94.3468 63.7152 94.2637 63.6161 94.161C63.5171 94.0584 63.4416 93.9384 63.3942 93.8083C62.3051 91.0761 61.7471 88.189 61.7458 85.2791C61.7458 82.6934 62.2653 80.3412 63.281 78.2977C66.2839 72.2824 72.9431 68.3859 80.2341 68.3859C90.5056 68.3859 98.8581 75.9491 98.8581 85.2575C98.8581 88.7482 95.7429 91.5925 91.905 91.5925C88.0671 91.5925 84.9519 88.7482 84.9519 85.2575C84.9528 82.952 82.8532 81.0738 80.2575 81.0738C77.6618 81.0738 75.5622 82.9484 75.5622 85.254C75.5622 88.935 77.0525 92.3861 79.7839 94.9718C81.9323 96.9973 83.9831 98.1142 87.1657 98.9581C87.7751 99.1089 88.114 99.7122 87.9558 100.272C87.9065 100.5 87.7746 100.705 87.5817 100.855C87.3888 101.004 87.1464 101.089 86.8942 101.095Z"
            fill="white"
          />
          <circle class="pulse-first" cx="80" cy="80" r="59.5" stroke="#CDCDCD" />
          <circle class="pulse-second" cx="80" cy="80" r="59.5" stroke="#CDCDCD" />
          <circle class="pulse-third" cx="80" cy="80" r="59.5" stroke="#CDCDCD" />
        </svg>
        <svg v-show="end" width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="80" cy="80" r="50" fill="#1BAA75" />
          <path d="M59 77.0941L74.9416 93L101 67" stroke="white" stroke-width="2.5" stroke-linecap="round" />
        </svg>
      </div>
      <div v-show="start" class="auth-item__start auth-item__process">Подтверждение отпечатка пальцев</div>
      <div v-show="center" class="auth-item__loading auth-item__process">
        <svg
          width="25"
          height="24"
          viewBox="0 0 25 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="loading-svg"
        >
          <g clip-path="url(#clip0_927_13753)">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M13.7 19.2C14.3365 19.2 14.947 19.4529 15.3971 19.9029C15.8471 20.353 16.1 20.9635 16.1 21.6C16.1 22.2365 15.8471 22.847 15.3971 23.2971C14.947 23.7471 14.3365 24 13.7 24C13.0635 24 12.453 23.7471 12.0029 23.2971C11.5529 22.847 11.3 22.2365 11.3 21.6C11.3 20.9635 11.5529 20.353 12.0029 19.9029C12.453 19.4529 13.0635 19.2 13.7 19.2ZM6.1892 15.6C6.98485 15.6 7.74791 15.9161 8.31052 16.4787C8.87313 17.0413 9.1892 17.8044 9.1892 18.6C9.1892 19.3957 8.87313 20.1587 8.31052 20.7213C7.74791 21.2839 6.98485 21.6 6.1892 21.6C5.39355 21.6 4.63049 21.2839 4.06788 20.7213C3.50527 20.1587 3.1892 19.3957 3.1892 18.6C3.1892 17.8044 3.50527 17.0413 4.06788 16.4787C4.63049 15.9161 5.39355 15.6 6.1892 15.6ZM20.0828 16.2C20.7193 16.2 21.3298 16.4529 21.7799 16.9029C22.2299 17.353 22.4828 17.9635 22.4828 18.6C22.4828 19.2365 22.2299 19.847 21.7799 20.2971C21.3298 20.7471 20.7193 21 20.0828 21C19.4463 21 18.8358 20.7471 18.3857 20.2971C17.9357 19.847 17.6828 19.2365 17.6828 18.6C17.6828 17.9635 17.9357 17.353 18.3857 16.9029C18.8358 16.4529 19.4463 16.2 20.0828 16.2ZM22.7 11.1828C23.1774 11.1828 23.6352 11.3724 23.9728 11.71C24.3104 12.0476 24.5 12.5054 24.5 12.9828C24.5 13.4602 24.3104 13.918 23.9728 14.2556C23.6352 14.5932 23.1774 14.7828 22.7 14.7828C22.2226 14.7828 21.7648 14.5932 21.4272 14.2556C21.0896 13.918 20.9 13.4602 20.9 12.9828C20.9 12.5054 21.0896 12.0476 21.4272 11.71C21.7648 11.3724 22.2226 11.1828 22.7 11.1828ZM3.5 7.2C4.29565 7.2 5.05871 7.51607 5.62132 8.07868C6.18393 8.64129 6.5 9.40435 6.5 10.2C6.5 10.9957 6.18393 11.7587 5.62132 12.3213C5.05871 12.8839 4.29565 13.2 3.5 13.2C2.70435 13.2 1.94129 12.8839 1.37868 12.3213C0.816071 11.7587 0.5 10.9957 0.5 10.2C0.5 9.40435 0.816071 8.64129 1.37868 8.07868C1.94129 7.51607 2.70435 7.2 3.5 7.2ZM21.8432 6.2484C22.1615 6.2484 22.4667 6.37483 22.6917 6.59987C22.9168 6.82492 23.0432 7.13014 23.0432 7.4484C23.0432 7.76666 22.9168 8.07189 22.6917 8.29693C22.4667 8.52197 22.1615 8.6484 21.8432 8.6484C21.5249 8.6484 21.2197 8.52197 20.9947 8.29693C20.7696 8.07189 20.6432 7.76666 20.6432 7.4484C20.6432 7.13014 20.7696 6.82492 20.9947 6.59987C21.2197 6.37483 21.5249 6.2484 21.8432 6.2484ZM10.1 0C11.0548 0 11.9705 0.379285 12.6456 1.05442C13.3207 1.72955 13.7 2.64522 13.7 3.6C13.7 4.55478 13.3207 5.47045 12.6456 6.14558C11.9705 6.82072 11.0548 7.2 10.1 7.2C9.14522 7.2 8.22955 6.82072 7.55442 6.14558C6.87928 5.47045 6.5 4.55478 6.5 3.6C6.5 2.64522 6.87928 1.72955 7.55442 1.05442C8.22955 0.379285 9.14522 0 10.1 0ZM19.1 3.6C19.2591 3.6 19.4117 3.66321 19.5243 3.77574C19.6368 3.88826 19.7 4.04087 19.7 4.2C19.7 4.35913 19.6368 4.51174 19.5243 4.62426C19.4117 4.73679 19.2591 4.8 19.1 4.8C18.9409 4.8 18.7883 4.73679 18.6757 4.62426C18.5632 4.51174 18.5 4.35913 18.5 4.2C18.5 4.04087 18.5632 3.88826 18.6757 3.77574C18.7883 3.66321 18.9409 3.6 19.1 3.6Z"
              fill="#1BAA75"
            />
          </g>
          <defs>
            <clipPath id="clip0_927_13753">
              <rect width="24" height="24" fill="white" transform="translate(0.5)" />
            </clipPath>
          </defs>
        </svg>
        Проверка отпечатка пальцев
      </div>
      <div v-show="end" class="auth-item__success auth-item__process">Проверка отпечатка пальцев прошла успешно</div>
      <Btn title="Подписать" bg="#1BAA75" :disabled="!end" @click="handleClick" />
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import Btn from '../Buttons/Btn.vue'
const isActive = ref(true)
const scanerAnalys = ref(false)
const start = ref(true)
const center = ref(false)
const end = ref(false)

const handleClick = () => {
  start.value = false
  center.value = true
  end.value = false
  scanerAnalys.value = true

  setTimeout(() => {
    center.value = false
    end.value = true
    scanerAnalys.value = false
  }, 5000)
}
</script>

<style lang="scss">
@import "../../assets/scss/variables.scss";
.auth-item {
  &__alert {
    background: $bg-white;
    border: 1px solid $border-white;
    box-shadow: 0px 10px 20px $shadow-gray;
    padding: 16px;
    display: flex;
    gap: 6px;

    p {
      font-size: 14px;
      line-height: 140%;
      color: $text-gray-blue;
      max-width: 419px;
    }
  }

  .scaner-svg {
    position: relative;
    z-index: 1;
    text-align: center;
    margin-top: 30px;
  }

  .scaner-svg.active {
    .pulse {
      &-first,
      &-second,
      &-third {
        opacity: 1;
        animation-name: pulse;
      }
    }
  }

  .pulse {
    &-first,
    &-second,
    &-third {
      position: absolute;
      top: 50%;
      left: 50%;
      z-index: -1;
      transform-origin: 50% 50%;
      animation-duration: 2s;
      animation-iteration-count: infinite;
      opacity: 0;
    }

    &-first {
      animation-delay: 0s;
    }

    &-second {
      animation-delay: 0.5s;
    }

    &-third {
      animation-delay: 1s;
    }
  }

  &__process {
    font-size: 16px;
    line-height: 130%;
    text-align: center;
    color: $text-gray-blue;
    margin: 30px 0;
  }

  &__loading {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;

    svg {
      transform-origin: center;
      animation-duration: 1s;
      animation-name: round;
      animation-iteration-count: infinite;
      animation-timing-function: linear;
    }
  }
}

@keyframes round {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes pulse {
  from {
    stroke-width: 3px;
    transform: scale(0.85);
  }
  to {
    stroke-width: 0;
    transform: scale(1.2);
  }
}
</style>
